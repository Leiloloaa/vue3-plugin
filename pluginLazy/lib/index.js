"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const v=require("vant"),y=require("./Lazy.vue_vue_type_script_setup_true_lang.js"),_=(()=>{try{return document.createElement("canvas").toDataURL("image/webp",.5).startsWith("data:image/webp")}catch{return!1}})(),o="?x-oss-process=image/format,webp/quality,Q_80",u=e=>_&&/webp$/.test(e.value)&&e.modifiers.webp;function f(e,t){const r=()=>{console.info("\u56FE\u7247\u62A5\u9519\u4E86===",t.value),e.src=t.value,e.removeEventListener("error",r)};e._hasLazyListener||(e.addEventListener("error",r),e._hasLazyListener=!0),e.src=u(t)?t.value+o:t.value}function d(e,t){e.style.backgroundImage=`url('${u(t)?t.value+o:t.value}')`,e.style.backgroundSize="100% 100%"}function a(e,t){return t.modifiers.bg?d(e,t):f(e,t)}const n={beforeMount(e,t){e._hasLazyListener=!1;function r(){const s=new IntersectionObserver((c,i)=>{c.forEach(l=>{l.isIntersecting&&(a(e,t),i.unobserve(e))})},{threshold:0});s==null||s.observe(e)}window.IntersectionObserver?r():a(e,t)},updated(e,t){a(e,t)}},m=e=>{e.use(v.Lazyload,{lazyComponent:!0}),e._context.directives.lazy&&delete e._context.directives.lazy,e.directive("lazy",n),e.component("Lazy",y)};exports.default=m;exports.lazyBody=n;
